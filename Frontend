import tkinter as tk
from tkinter import ttk, messagebox, filedialog
import os

class LocalCivilRegistryApp:
    def __init__(self, root):
        self.root = root
        self.root.title("Local Civil Registry")
        self.root.geometry("1000x700")
        self.root.configure(bg="#f0f0f0")
        
        # Track current page and uploaded files
        self.current_frame = None
        self.uploaded_files = []
        self.is_logged_in = False
        
        # Create the header
        self.create_header()
        
        # Create the login form
        self.create_login_form()
    
    def create_header(self, show_nav=False):
        """Create the green header bar with optional navigation buttons"""
        # Clear existing header if any
        for widget in self.root.winfo_children():
            if isinstance(widget, tk.Frame) and widget.cget("bg") == "#00c853":
                widget.destroy()
        
        header_frame = tk.Frame(self.root, bg="#00c853", height=60)
        header_frame.pack(fill="x", pady=(0, 0))
        header_frame.pack_propagate(False)
        
        # Left side - title
        header_label = tk.Label(
            header_frame,
            text="LOCAL CIVIL REGISTRY",
            font=("Arial", 20, "bold"),
            bg="#00c853",
            fg="black"
        )
        header_label.pack(side="left", padx=20, pady=15)
        
        # Right side - navigation buttons (if logged in)
        if show_nav:
            nav_frame = tk.Frame(header_frame, bg="#00c853")
            nav_frame.pack(side="right", padx=20)
            
            services_btn = tk.Button(
                nav_frame,
                text="SERVICES",
                font=("Arial", 10, "bold"),
                bg="white",
                fg="black",
                relief="raised",
                bd=2,
                cursor="hand2",
                command=self.show_services_page
            )
            services_btn.pack(side="left", padx=5)
            
            records_btn = tk.Button(
                nav_frame,
                text="RECORDS",
                font=("Arial", 10, "bold"),
                bg="white",
                fg="black",
                relief="raised",
                bd=2,
                cursor="hand2",
                command=self.show_records_page
            )
            records_btn.pack(side="left", padx=5)
            
            # User icon
            user_icon = tk.Label(
                nav_frame,
                text="üë§",
                font=("Arial", 20),
                bg="#00c853",
                fg="black"
            )
            user_icon.pack(side="left", padx=10)
    
    def clear_frame(self):
        """Clear the current frame"""
        if self.current_frame:
            self.current_frame.destroy()
            self.current_frame = None
    
    def create_login_form(self):
        """Create the login form in the center"""
        self.clear_frame()
        
        # Create a frame to center the login form
        self.current_frame = tk.Frame(self.root, bg="#f0f0f0")
        self.current_frame.pack(fill="both", expand=True)
        
        # Create a centered container
        center_container = tk.Frame(self.current_frame, bg="#f0f0f0")
        center_container.place(relx=0.5, rely=0.5, anchor="center")
        
        # Username field
        username_frame = tk.Frame(center_container, bg="#f0f0f0")
        username_frame.pack(pady=10)
        
        username_label = tk.Label(
            username_frame,
            text="Username:",
            font=("Arial", 12),
            bg="#f0f0f0"
        )
        username_label.pack(side="left", padx=(0, 10))
        
        self.username_entry = tk.Entry(
            username_frame,
            font=("Arial", 12),
            width=20,
            relief="solid",
            bd=1
        )
        self.username_entry.pack(side="left")
        
        # Password field
        password_frame = tk.Frame(center_container, bg="#f0f0f0")
        password_frame.pack(pady=10)
        
        password_label = tk.Label(
            password_frame,
            text="Password:",
            font=("Arial", 12),
            bg="#f0f0f0"
        )
        password_label.pack(side="left", padx=(0, 10))
        
        self.password_entry = tk.Entry(
            password_frame,
            font=("Arial", 12),
            width=20,
            show="*",
            relief="solid",
            bd=1
        )
        self.password_entry.pack(side="left")
        
        # Login button
        login_button = tk.Button(
            center_container,
            text="Login",
            font=("Arial", 11, "bold"),
            bg="#00c853",
            fg="black",
            width=10,
            relief="raised",
            bd=2,
            cursor="hand2",
            command=self.login
        )
        login_button.pack(pady=20)
    
    def show_services_page(self):
        """Display the services page"""
        self.clear_frame()
        
        # Create services frame
        self.current_frame = tk.Frame(self.root, bg="white")
        self.current_frame.pack(fill="both", expand=True)
        
        # Services title
        title_label = tk.Label(
            self.current_frame,
            text="SERVICES",
            font=("Arial", 36, "bold"),
            bg="white",
            fg="black"
        )
        title_label.pack(pady=40)
        
        # Certifications button
        certifications_btn = tk.Button(
            self.current_frame,
            text="CERTIFICATIONS",
            font=("Arial", 16, "bold"),
            bg="#00c853",
            fg="black",
            width=25,
            height=2,
            relief="raised",
            bd=3,
            cursor="hand2",
            command=self.show_certifications_page
        )
        certifications_btn.pack(pady=20)
        
        # Application for Marriage License button
        marriage_btn = tk.Button(
            self.current_frame,
            text="APPLICATION FOR\nMARRIAGE LICENSE",
            font=("Arial", 16, "bold"),
            bg="#00c853",
            fg="black",
            width=25,
            height=2,
            relief="raised",
            bd=3,
            cursor="hand2",
            command=self.show_marriage_license_page
        )
        marriage_btn.pack(pady=20)
    
    def show_certifications_page(self):
        """Display the certifications page with file upload"""
        self.clear_frame()
        
        # Create certifications frame
        self.current_frame = tk.Frame(self.root, bg="white")
        self.current_frame.pack(fill="both", expand=True)
        
        # Back button
        back_btn = tk.Button(
            self.current_frame,
            text="‚Üê Back",
            font=("Arial", 10),
            bg="white",
            fg="#00c853",
            relief="flat",
            cursor="hand2",
            command=self.show_services_page
        )
        back_btn.place(x=20, y=20)
        
        # Title
        title_label = tk.Label(
            self.current_frame,
            text="CERTIFICATIONS",
            font=("Arial", 28, "bold"),
            bg="white",
            fg="black"
        )
        title_label.pack(pady=20)
        
        # Subtitle
        subtitle_label = tk.Label(
            self.current_frame,
            text="Form 1A, Form 2A, Form 3A",
            font=("Arial", 12),
            bg="white",
            fg="gray"
        )
        subtitle_label.pack(pady=5)
        
        # File upload area
        upload_frame = tk.Frame(
            self.current_frame,
            bg="white",
            relief="solid",
            bd=2,
            width=600,
            height=250
        )
        upload_frame.pack(pady=30)
        upload_frame.pack_propagate(False)
        
        # Upload icon and text
        upload_icon = tk.Label(
            upload_frame,
            text="üìÅ",
            font=("Arial", 40),
            bg="white"
        )
        upload_icon.pack(pady=30)
        
        upload_label = tk.Label(
            upload_frame,
            text="Drag & Drop files here to upload",
            font=("Arial", 12),
            bg="white",
            fg="black"
        )
        upload_label.pack()
        
        browse_label = tk.Label(
            upload_frame,
            text="or Browse Files",
            font=("Arial", 11),
            bg="white",
            fg="#00c853",
            cursor="hand2"
        )
        browse_label.pack(pady=5)
        browse_label.bind("<Button-1>", lambda e: self.browse_files())
        
        # Show uploaded files if any
        if self.uploaded_files:
            files_label = tk.Label(
                self.current_frame,
                text=f"Uploaded: {', '.join([os.path.basename(f) for f in self.uploaded_files])}",
                font=("Arial", 10),
                bg="white",
                fg="green"
            )
            files_label.pack(pady=5)
        
        # Proceed button
        proceed_btn = tk.Button(
            self.current_frame,
            text="PROCEED",
            font=("Arial", 12, "bold"),
            bg="#00c853",
            fg="white",
            width=12,
            height=1,
            relief="raised",
            bd=3,
            cursor="hand2",
            command=self.show_form_template
        )
        proceed_btn.pack(pady=20)
    
    def show_marriage_license_page(self):
        """Display the marriage license application page"""
        self.clear_frame()
        
        # Create marriage license frame
        self.current_frame = tk.Frame(self.root, bg="white")
        self.current_frame.pack(fill="both", expand=True)
        
        # Back button
        back_btn = tk.Button(
            self.current_frame,
            text="‚Üê Back",
            font=("Arial", 10),
            bg="white",
            fg="#00c853",
            relief="flat",
            cursor="hand2",
            command=self.show_services_page
        )
        back_btn.place(x=20, y=20)
        
        # Title
        title_label = tk.Label(
            self.current_frame,
            text="APPLICATION FOR MARRIAGE LICENSE",
            font=("Arial", 24, "bold"),
            bg="white",
            fg="black"
        )
        title_label.pack(pady=20)
        
        # File upload area
        upload_frame = tk.Frame(
            self.current_frame,
            bg="white",
            relief="solid",
            bd=2,
            width=600,
            height=250
        )
        upload_frame.pack(pady=30)
        upload_frame.pack_propagate(False)
        
        # Upload icon and text
        upload_icon = tk.Label(
            upload_frame,
            text="üìÅ",
            font=("Arial", 40),
            bg="white"
        )
        upload_icon.pack(pady=30)
        
        upload_label = tk.Label(
            upload_frame,
            text="Drag & Drop files here to upload",
            font=("Arial", 12),
            bg="white",
            fg="black"
        )
        upload_label.pack()
        
        browse_label = tk.Label(
            upload_frame,
            text="or Browse Files",
            font=("Arial", 11),
            bg="white",
            fg="#00c853",
            cursor="hand2"
        )
        browse_label.pack(pady=5)
        browse_label.bind("<Button-1>", lambda e: self.browse_files())
        
        # Show uploaded files if any
        if self.uploaded_files:
            files_label = tk.Label(
                self.current_frame,
                text=f"Uploaded: {', '.join([os.path.basename(f) for f in self.uploaded_files])}",
                font=("Arial", 10),
                bg="white",
                fg="green"
            )
            files_label.pack(pady=5)
        
        # Proceed button
        proceed_btn = tk.Button(
            self.current_frame,
            text="PROCEED",
            font=("Arial", 12, "bold"),
            bg="#00c853",
            fg="white",
            width=12,
            height=1,
            relief="raised",
            bd=3,
            cursor="hand2",
            command=self.show_marriage_template
        )
        proceed_btn.pack(pady=20)
    
    def show_form_template(self):
        """Display the form template viewer for certifications"""
        self.clear_frame()
        
        # Create template frame
        self.current_frame = tk.Frame(self.root, bg="white")
        self.current_frame.pack(fill="both", expand=True)
        
        # Back button
        back_btn = tk.Button(
            self.current_frame,
            text="‚Üê Back",
            font=("Arial", 10),
            bg="white",
            fg="#00c853",
            relief="flat",
            cursor="hand2",
            command=self.show_certifications_page
        )
        back_btn.place(x=20, y=20)
        
        # Template display area
        template_frame = tk.Frame(
            self.current_frame,
            bg="white",
            relief="solid",
            bd=2,
            width=600,
            height=400
        )
        template_frame.pack(pady=50)
        template_frame.pack_propagate(False)
        
        # Template text
        template_label = tk.Label(
            template_frame,
            text="TEMPLATE OF\nFORM 1A/FORM 2A/FORM 3A",
            font=("Arial", 18),
            bg="white",
            fg="black",
            justify="center"
        )
        template_label.pack(expand=True)
        
        # Save button
        save_btn = tk.Button(
            self.current_frame,
            text="SAVE",
            font=("Arial", 12, "bold"),
            bg="#00c853",
            fg="white",
            width=10,
            height=1,
            relief="raised",
            bd=3,
            cursor="hand2",
            command=self.save_certification
        )
        save_btn.place(relx=0.85, rely=0.8)
    
    def show_marriage_template(self):
        """Display the marriage license template viewer"""
        self.clear_frame()
        
        # Create template frame
        self.current_frame = tk.Frame(self.root, bg="white")
        self.current_frame.pack(fill="both", expand=True)
        
        # Back button
        back_btn = tk.Button(
            self.current_frame,
            text="‚Üê Back",
            font=("Arial", 10),
            bg="white",
            fg="#00c853",
            relief="flat",
            cursor="hand2",
            command=self.show_marriage_license_page
        )
        back_btn.place(x=20, y=20)
        
        # Template display area
        template_frame = tk.Frame(
            self.current_frame,
            bg="white",
            relief="solid",
            bd=2,
            width=600,
            height=400
        )
        template_frame.pack(pady=50)
        template_frame.pack_propagate(False)
        
        # Template text
        template_label = tk.Label(
            template_frame,
            text="TEMPLATE OF\nAPPLICATION OF MARRIAGE\nLICENSE",
            font=("Arial", 18),
            bg="white",
            fg="black",
            justify="center"
        )
        template_label.pack(expand=True)
        
        # Save button
        save_btn = tk.Button(
            self.current_frame,
            text="SAVE",
            font=("Arial", 12, "bold"),
            bg="#00c853",
            fg="white",
            width=10,
            height=1,
            relief="raised",
            bd=3,
            cursor="hand2",
            command=self.save_marriage_application
        )
        save_btn.place(relx=0.85, rely=0.8)
    
    def show_records_page(self):
        """Display the records page with search and filter"""
        self.clear_frame()
        
        # Create records frame
        self.current_frame = tk.Frame(self.root, bg="white")
        self.current_frame.pack(fill="both", expand=True)
        
        # Top section with search and filter
        top_frame = tk.Frame(self.current_frame, bg="white")
        top_frame.pack(fill="x", padx=30, pady=20)
        
        # Search bar
        search_frame = tk.Frame(top_frame, bg="white")
        search_frame.pack(side="left")
        
        search_entry = tk.Entry(
            search_frame,
            font=("Arial", 11),
            width=20,
            relief="solid",
            bd=1
        )
        search_entry.insert(0, "Search")
        search_entry.pack(side="left", padx=5)
        
        search_btn = tk.Label(
            search_frame,
            text="üîç",
            font=("Arial", 14),
            bg="white",
            cursor="hand2"
        )
        search_btn.pack(side="left")
        
        # Type dropdown
        type_var = tk.StringVar(value="Type")
        type_dropdown = ttk.Combobox(
            top_frame,
            textvariable=type_var,
            values=["Birth Certificate", "Death Certificate", "Marriage Certificate", "Marriage License"],
            state="readonly",
            font=("Arial", 11),
            width=18
        )
        type_dropdown.pack(side="left", padx=20)
        
        # Records title on the right
        records_label = tk.Label(
            top_frame,
            text="RECORDS",
            font=("Arial", 32, "bold"),
            bg="white",
            fg="black"
        )
        records_label.pack(side="right", padx=20)
        
        # Records display area
        records_frame = tk.Frame(
            self.current_frame,
            bg="white",
            relief="solid",
            bd=2
        )
        records_frame.pack(fill="both", expand=True, padx=30, pady=20)
        
        # Placeholder text
        no_records_label = tk.Label(
            records_frame,
            text="No records to display\n\nRecords will appear here after certifications or marriage licenses are saved.",
            font=("Arial", 14),
            bg="white",
            fg="gray",
            justify="center"
        )
        no_records_label.pack(expand=True)
    
    def browse_files(self):
        """Open file browser dialog"""
        filename = filedialog.askopenfilename(
            title="Select a file",
            filetypes=[
                ("All files", "*.*"),
                ("PDF files", "*.pdf"),
                ("Image files", "*.png *.jpg *.jpeg")
            ]
        )
        if filename:
            self.uploaded_files.append(filename)
            messagebox.showinfo("File Selected", f"File uploaded: {os.path.basename(filename)}")
    
    def save_certification(self):
        """Save certification and return to services"""
        messagebox.showinfo("Success", "Certification saved successfully!")
        self.uploaded_files = []  # Clear uploaded files
        self.show_services_page()
    
    def save_marriage_application(self):
        """Save marriage application and return to services"""
        messagebox.showinfo("Success", "Marriage License application saved successfully!")
        self.uploaded_files = []  # Clear uploaded files
        self.show_services_page()
    
    def login(self):
        """Handle login button click"""
        username = self.username_entry.get()
        password = self.password_entry.get()
        
        if username and password:
            self.is_logged_in = True
            # Update header with navigation
            self.create_header(show_nav=True)
            # Show services page
            self.show_services_page()
        else:
            messagebox.showwarning(
                "Warning",
                "Please enter both username and password"
            )

def main():
    root = tk.Tk()
    app = LocalCivilRegistryApp(root)
    root.mainloop()

if __name__ == "__main__":
    main()